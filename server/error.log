{"level":"error","message":"Error: User already exists","stack":"Error: User already exists\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:28:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error: promisify is not defined","stack":"ReferenceError: promisify is not defined\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:95:19\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)\n    at Route.dispatch (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:114:3)\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:175:3)"}
{"level":"error","message":"Error: promisify is not defined","stack":"ReferenceError: promisify is not defined\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:95:19\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)\n    at Route.dispatch (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:114:3)\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:175:3)"}
{"level":"error","message":"Error: promisify is not defined","stack":"ReferenceError: promisify is not defined\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:95:19\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)\n    at Route.dispatch (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:114:3)\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:175:3)"}
{"level":"error","message":"Error: promisify is not defined","stack":"ReferenceError: promisify is not defined\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:95:19\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:2:19\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)\n    at Route.dispatch (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:114:3)\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:175:3)"}
{"level":"error","message":"Error: promisify is not defined","stack":"ReferenceError: promisify is not defined\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:95:19\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)\n    at Route.dispatch (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:114:3)\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:175:3)"}
{"level":"error","message":"Error: jwt malformed","stack":"JsonWebTokenError: jwt malformed\n    at module.exports (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at node:internal/util:442:7\n    at new Promise (<anonymous>)\n    at node:internal/util:428:12\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:96:46\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)\n    at Route.dispatch (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:114:3)\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)"}
{"level":"error","message":"Error: jwt malformed","stack":"JsonWebTokenError: jwt malformed\n    at module.exports (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at node:internal/util:442:7\n    at new Promise (<anonymous>)\n    at node:internal/util:428:12\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:96:46\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)\n    at Route.dispatch (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:114:3)\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)"}
{"level":"error","message":"Error: jwt malformed","stack":"JsonWebTokenError: jwt malformed\n    at module.exports (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at node:internal/util:442:7\n    at new Promise (<anonymous>)\n    at node:internal/util:428:12\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:98:46\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)\n    at Route.dispatch (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:114:3)\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)"}
{"level":"error","message":"Error: jwt expired","stack":"TokenExpiredError: jwt expired\n    at /home/esmael/Documents/Project/Express/express_shop/server/node_modules/jsonwebtoken/verify.js:190:21\n    at getSecret (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/jsonwebtoken/verify.js:97:14)\n    at module.exports (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/jsonwebtoken/verify.js:101:10)\n    at node:internal/util:442:7\n    at new Promise (<anonymous>)\n    at node:internal/util:428:12\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:98:46\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)"}
{"level":"error","message":"Error: jwt expired","stack":"TokenExpiredError: jwt expired\n    at /home/esmael/Documents/Project/Express/express_shop/server/node_modules/jsonwebtoken/verify.js:190:21\n    at getSecret (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/jsonwebtoken/verify.js:97:14)\n    at module.exports (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/jsonwebtoken/verify.js:101:10)\n    at node:internal/util:442:7\n    at new Promise (<anonymous>)\n    at node:internal/util:428:12\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:98:46\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)"}
{"level":"error","message":"Error: currentUser.changedPasswordAfter is not a function","stack":"TypeError: currentUser.changedPasswordAfter is not a function\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:105:20\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error: userModel is not defined","stack":"ReferenceError: userModel is not defined\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:39:5\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error: emailorPhone is not defined","stack":"ReferenceError: emailorPhone is not defined\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/controllers/authController.js:27:60\n    at /home/esmael/Documents/Project/Express/express_shop/server/src/utils/catchAsync.js:3:5\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:144:13)\n    at Route.dispatch (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/route.js:114:3)\n    at Layer.handle [as handle_request] (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/esmael/Documents/Project/Express/express_shop/server/node_modules/express/lib/router/index.js:175:3)"}
